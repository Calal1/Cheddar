#!/usr/bin/env bash
cpath="$(dirname $(readlink -f $0))"
echo
echo "Determining build"
if [ ! -d "$cpath/../dist" ]; then
    echo "No existing build, building..."
    $cpath/../node_modules/.bin/grunt build
fi

echo "Installing executable..."
cp "$cpath/../dist/cli/cheddar" "$1/bin/"
echo "Installing cheddar..."
cp -r "$cpath/../dist/" "$1/share/cheddar"
echo
echo "Cleaning up..."
bash "$cpath/cleanup" "$1/share/cheddar"
echo "Done."